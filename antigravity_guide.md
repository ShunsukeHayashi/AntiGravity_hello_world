# Google Antigravity 使い方ガイド

このドキュメントは、Google Antigravityの公式ドキュメントURLをもとに、その機能と使い方を詳細にまとめたものです。

## 1. 概要 (Overview)

Antigravityは、AIネイティブな開発を実現するための新しいプラットフォームです。主に以下の3つのサーフェス（操作画面）と、重要な概念で構成されています。

### Core Surfaces (主要な操作画面)
*   **Editor (エディタ)**: 単一のワークスペースに対応した、AI完全統合型のIDEです。
*   **Browser (ブラウザ - Preview)**: IDEの外側にあるWebブラウザ等の操作も可能な「ブラウザ操作エージェント」機能です。
*   **Agent Manager (エージェントマネージャー - Preview)**: 会話と成果物(Artifacts)に焦点を当てた、タスク実行・管理のためのミニマリストな画面です。複数のエージェントをオーケストレーション(調整・管理)することができます。

### Key Terms (重要な用語)
*   **Agent (エージェント)**: Antigravityにおける主要なAI機能です。エディタ内でユーザーと密接に連携するだけでなく、複数のコードベースにまたがって作業したり、Agent Managerを通じて監視・管理したりすることが可能です。
*   **Tab & Command (タブ & コマンド)**: エディタ内のテキスト編集におけるAI機能です。
    *   **Tab**: 強力なオートコンプリート機能。
    *   **Command**: インラインでの指示・編集機能。
    *   ※ 文脈として、これらはAgent機能ほど頻繁には使用されない傾向にあるようです。
*   **Artifacts (成果物)**: エージェントが作業を遂行するため、あるいはユーザーに成果を伝えるために作成するあらゆるものを指します。
    *   例: リッチなMarkdownファイル、差分ビュー(Diff)、アーキテクチャ図、画像、ブラウザ操作の録画など。

## 2. はじめに (Getting Started)

### ダウンロードとシステム要件
[antigravity.google/download](https://antigravity.google/download) からダウンロード可能です。
*   **macOS**: macOS Monterey (12) 以降。Apple Silicon推奨 (x86は非サポート)。
*   **Windows**: Windows 10 (64 bit)。
*   **Linux**: glibc >= 2.28, glibcxx >= 3.4.25 (Ubuntu 20, Debian 10等)。

### 基本操作
*   **Agent Managerの起動**: Editor上部のバーにあるボタン、またはショートカット `Cmd + E` で起動します。

## 3. エージェント (Agent)

Agentは、Google Antigravityの中核となるAI機能です。フロンティアモデルを搭載し、コードベース全体の推論、ツールの使用（ブラウザ操作含む）、およびタスクや成果物を通じたユーザーとのコミュニケーションを行います。

### 主な構成要素
1.  **Reasoning model (推論モデル)**: 思考を行うAIモデル。
2.  **Tools (ツール)**: エージェントが使用できる機能。
3.  **Artifacts (成果物)**: 作業結果の出力形式。
4.  **Knowledge (知識)**: エージェントが参照する情報。

### カスタマイズ機能
*   Agent Modes / Settings (モードと設定)
*   MCP (Model Context Protocol)
*   Rules / Workflows (ルールとワークフロー)

### 操作
複数のAgent会話を並列で実行可能です。不要になった会話は「右クリック > Delete Conversation」やゴミ箱アイコンで削除できます。

## 4. モデル (Models)

コード推論用として、Google Vertex Model Gardenから提供される主要なフロンティアモデルを選択可能です。

### 利用可能なモデル
*   **Google**: Gemini 3 Pro (high/low), Gemini 3 Flash
*   **Anthropic**: Claude Sonnet 4.5 (Thinking対応あり), Claude Opus 4.5 (Thinking対応)
*   **OpenAI**: GPT-OSS

### モデルの選択
チャット入力欄の下にあるドロップダウンから選択します。設定は「会話のターン」ごとに維持されます。実行中に変更しても、そのターンの処理が完了するまでは変更前のモデルが使用されます。

## 5. モードと設定 (Agent Modes / Settings)

### エージェントモード (Modes)
会話開始時に、タスクの性質に合わせてモードを選択できます。
*   **Planning (計画モード)**:
    *   深い調査、複雑なタスク、共同作業向け。
    *   タスクを「Task Groups」に分割して管理し、アーティファクトを作成しながら慎重に進めます。品質重視。
*   **Fast (高速モード)**:
    *   単純なタスク（リネーム、簡単なbashコマンド実行など）向け。
    *   直接実行に移るため高速ですが、複雑な設計には向きません。

### 設定 (Settings)
Settingsペインの「Agent」タブで設定可能です。
*   **Artifact Review Policy**: 実装計画などの成果物に対するレビュー方針。
    *   **Always Proceed**: 確認なしで進める。
    *   **Request Review**: 必ずユーザーの確認を求める（推奨）。この場合、エージェントは計画作成後に一旦停止し、ユーザーが内容を確認・修正する時間を設けます。

## 6. ルールとワークフロー (Rules / Workflows)

エージェントの振る舞いをカスタマイズする強力な機能です。Markdownファイルで定義します（最大12,000文字）。

### Rules (ルール)
システムプロンプトに追加される指示です。
*   **Global Rules**: 全てのワークスペース・会話に適用されます。
*   **Workspace Rules**: 現在のワークスペース（リポジトリ）のみに適用されます。プロジェクト固有のコーディング規約などを書くのに適しています。
*   **@ Mentions**: ルールファイル内で `@filename` のようにファイルを指定すると、そのファイルの内容をコンテキストとして参照できます。

### Workflows (ワークフロー)
デプロイ手順やPRレビューなど、繰り返し発生する一連のタスクを定義します。
*   **実行方法**: チャットで `/workflow-name` のようにスラッシュコマンドとして呼び出します。
*   **作成場所**: エージェントパネル上部の「...」メニュー > Customizations > Workflows から作成（GlobalまたはWorkspace）。
*   **機能**: 他のワークフローを呼び出すことも可能（ネスト可能）。会話履歴からエージェントにワークフローを生成させることもできます。

## 7. タスクグループ (Task Groups)
Planningモードで使用される機能で、大きなタスクを小さく管理しやすい単位に分割します。
*   各グループには目標と変更内容のサマリーが表示されます。
*   変更されたファイルの「File Pill」をクリックすることで、素早く変更内容を確認（Audit）できます。

## 8. 拡張機能と連携 (MCP & Browser)

### Model Context Protocol (MCP)
エージェントが外部データソースやツールと連携するための標準プロトコルです。
*   **MCP Store**: エディタ内から簡単にサーバーをインストール・管理できます。
*   **連携例**: ファイルシステム、Google Sheets、GitHub、Slackなど。
*   **カスタム**: WebSocketやstdioを使用して独自のMCPサーバーを接続することも可能です。

### Browser Subagent (ブラウザ操作エージェント)
エージェントがIDEの外でWebブラウザを操作する必要がある場合に呼び出される特別なサブエージェントです。
*   **機能**: クリック、スクロール、入力、ログ読み取り、DOM/スクリーンショット取得など。
*   **動作**: 操作中はブラウザ上に青い枠線とステータスが表示されます。バックグラウンドのタブでも操作可能です。
*   **注意**: 操作実行中は、競合を避けるためにユーザーはページ操作を控える必要があります。

## 9. 成果物とセキュリティ (Artifacts & Security)

### Artifacts (成果物)
エージェントの作業結果や思考プロセスをユーザーに伝えるためのあらゆる出力です。非同期なコミュニケーションを可能にします。
*   **種類**: Markdownドキュメント、実装計画、Diff、図、画像、録画など。
*   **Feedback**: ユーザーはArtifactに対してレビューやフィードバックを行うことで、エージェントの方向性を修正できます。

### Secure Mode (セキュアモード)
高い安全性とプライバシーを確保するための制限モードです。
*   **Allowlist/Denylist**: 外部URL（画像の読み込みやRead URLツール）へのアクセスを制御します。
*   **承認フロー**: 以下の操作に対して、常にユーザーの承認（Request Review）を求めます。
    *   ターミナルコマンドの実行
    *   ブラウザでのJavaScript実行
    *   Artifactに基づく変更の適用
*   **ファイルシステム制限**: `.gitignore` を尊重し、ワークスペース外のファイルへのアクセスを禁止します。

## 10. インテリジェンスと管理 (Intelligence & Management)

### Knowledge (ナレッジ)
エージェントが過去の会話から自動的に学習・整理する「記憶」システムです。
*   **KI (Knowledge Items)**: トピックごとにまとめられた情報（サマリー、アーティファクト）です。
*   **自動生成**: 会話から自動的に抽出・更新されます。Agent Managerで一覧を確認できます。

### Tab & Command (タブとコマンド)
エディタのコーディング支援AIです。
*   **Tab**:
    *   **Supercomplete**: 複数行のコード予測。
    *   **Tab-to-Jump**: コード内の重要箇所へのジャンプ。
    *   **Tab-to-Import**: 不足しているインポートの自動追加。
*   **Command (Cmd+I)**:
    *   インラインでのコード生成・編集。
    *   エディタ内：ボイラープレート生成やリファクタリング。
    *   ターミナル内：複雑なコマンドの生成。

### Agent Manager (エージェントマネージャー)
複数のエージェントやワークスペースを統括的に管理する画面です (`Cmd + E`)。
*   複数の会話（タスク）を並行して監視・管理できます。
*   エディタウィンドウの表示/非表示などもコントロール可能です。
